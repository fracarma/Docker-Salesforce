sudo: required
services:
- docker
after_success:
- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
- export REPO=sebestblog/travis-demo
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH
  ; fi`
- docker build -f Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:$TAG
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
env:
  global:
  - secure: M9Nr+P8FsH4ikcv4ZEzoe5WEqsEvvv5evGincs2FLA3uy6CO2AVjwpXV2s2EnMYBVmtW/XVDsKIkjgyDKh6umnp9xBGW8e0ObdwpxwFmEBgPaAQjKqKQXcWfTbeijBP8R6v3qPjZNCPHMdYNAcrm8qzW8y21tLh8BAcd34opXeHzDg6DZISySPEr8WvirTQcuqRuOncP2N9jGv4mDzP/Nlmkwc52cjAcC2pA2LOZOPcKJN2uwPjlzzIVw4ipPp8tbiA81ZSh+0JWzbOpblixZ1Uci5+oMMVlvyxSVeKdCH1za8ALSP1uI5zXNkgY26UcXP6XkoX/QlmjvnNlbLorCI4fQCsmOaA5v+6dK2HTg/d+wg5XgLSj/K+ykB6C+T5PQh3fte7FUzxSsOMXANLKZIaCtjgYFbp+dmtadGX5FMWql7gckCV8U/X344XRq23KRehnP71naGVEC86sxIoCzXIQDTUIyzIgfwqk8F5ghrS6i6/28CZmmmm2KTQzqAsow7tCUgOYUoJawWstzJgpGKPBVTV+8pFobp/NnLz0oSscdSmYhrLWTHRqCOf8bk3P9U8kPrYvXq4rYsXrtlqAJLqp+NnuhwcG91HmE56LVGwEH34NB6ZVlnetntVvFWcQc6jV17pq9EfzFdaXZr/933e/Q6gdNbfhSuoRsQlEW+Q=
  - secure: UW/3NkCOPRmtikh833R5C7+7LxbXldecvtdOFnFlU8ZY5i/lx6me7mvzCeeMSm8vwKjLP+usF6VBxqwXdZfbZDt/i1yS5b4sMpEA8p2cteTRVWQRP1E9lYm8g/YYC36uOGHOBSx0VoeyTDKJKFPtl66W+3wevB0JlR2KERcwj2bEYsItCTD74SuNyIFrTiLcPlsURT6ng0JwNUJIr6L8GX7GYJGDHKCooi36m9Kg5i91+UBEKxCTHSo3JeEx1K3orNoC4h/zR0IUQ3sWKLQU2sCC97HrKUt//GKBOKa+jpE33/cZO6RA7F2btLdeFM/7BuT+BjDsDRYy2t6VROOGEMxr+mQEsWBBWkpO3I0ldySs4KQpTO8YXrVW0jLQ8wScUx0och06Gf4eUOcPDkLP0hDRuiQTzMpC+jxVizNzkx4iqoD6PBVxrKLZUop4EU9jusIjx/p/vmcrnkScWJ9bMdilw745JZ4Q6Ijt3qvZFlfRoEZwbS8Vb5GUZHszV3G399F5LqXzp28b97TgC9DWQccppj4RKZKulcLxvq2aiTWW4oluHaj2yqc9Fd+SGhnam+2VO2ECR71/Vc8whpfG+nALHHjxlEFi94vDVB7Tz0Yiz5hSJry03n1AxSymVxUxWWHQOsFxLx7L1afrb/2bNnskjCaYjtt11d4o+IET564=
  - secure: LoR6hmLhra8QIIsBOZhfBi4hGQEwKRPimyEPuaOc/4NxbQtuAc4mmfE1H3bU+/T45P/wK5g5ShVgKU1VuYa/BmTNRirHzbmpzPn10UU4T8Z1ex2lBMdzReCuXs/N+nJL9+WBCFbU1slwpCo35szhSLQLSn2JOtpUpsMf2X6SeqWvGL7X5CReRZ/fxat1U3BbUlm/nNtp9Jm46bJPOdaPELrPw0h503vOAsHA3eTAqlti/KwmZJVpba3V3qSl/GaFf6+Mvafq5QsHodPUaNDBta9R0Xm/sn0kq6oxkfIEemYYaMT/0ferEwmOjT+OAj593AuFN3XEX1PWK2CXJU7ZfJXxviMNBJ5fNgVfUqNZbRLxvT07OTW5Ow++pWCebmx0QJsc28HQgjoRpLAVVVpCZo3BdaHeZcFgBeRYMrjxO9GZQw52VwcZagsuNQxtQZpQV+xcGRPOvfIbuFQn4nxsjU16MoWnF2bdDT9pYRFrERkn1abiDK8cGtwx4RJkuEjNIeBJICnSFCaSOvA1yI5KpQYzx0Tm0guDvxZDGTavIcp5qTUBO/6KQZHIMuiNSz87p3v3klLTf82qXuaNoQQZ4g4G9/8snV5RWTCgoFAMXIJVneVzKd0Nl/w/QRe83OI9UswzY2gobWFwG/bN/Y2BEZqaEdBYfm8533pS0XeP0Bg=
